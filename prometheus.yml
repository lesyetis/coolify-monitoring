global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    monitor: 'coolify-monitoring'
    environment: 'production'

# Alertmanager configuration (optional - uncomment when needed)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ['alertmanager:9093']

# Rule files (optional - for alerting rules)
# rule_files:
#   - "alerts/*.yml"

scrape_configs:
  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          service: 'prometheus'

  # cAdvisor - Docker container metrics
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']
        labels:
          service: 'cadvisor'
    metric_relabel_configs:
      # Keep only container metrics
      - source_labels: [__name__]
        regex: 'container_.*'
        action: keep

  # Node Exporter - System metrics (CPU, RAM, disk, network)
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['node-exporter:9100']
        labels:
          service: 'node-exporter'
          instance: 'localhost'

  # Docker Engine metrics (if enabled on host)
  # Requires: dockerd --metrics-addr=0.0.0.0:9323
  - job_name: 'docker-engine'
    static_configs:
      - targets: ['host.docker.internal:9323']
        labels:
          service: 'docker'
    scrape_interval: 30s
